{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function articleTemplate(article) {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads} = article;\n  return `<li class=\"list-el\">\n\n <a href=\"${article.largeImageURL}\"><img src='${article.webformatURL}' alt='${article.tags}'></a>\n  <div class=\"content\">\n    <div class=\"item\"><h3>Likes</h3><p>${article.likes}</p></div>\n    <div class=\"item\"><h3>Views</h3><p>${article.views}</p></div>\n    <div class=\"item\"><h3>Comments</h3><p>${article.comments}</p></div>\n    <div class=\"item\"><h3>Downloads</h3><p>${article.downloads}</p></div>\n </div>\n</li>\n`;\n}","// https://pixabay.com/api/?key=44530588-77e4763ebb7280f93ce94dd82&q=yellow+flowers&image_type=photo\n\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/';\nconst END_POINT = 'api/';\nconst KEY = '44530588-77e4763ebb7280f93ce94dd82';\nconst options = {\n  // headers: {\n  //   'Key': 'key=44530588-77e4763ebb7280f93ce94dd82',\n  \n  // },\n};\n\n// export class NewsAPI {\n//   query = '';\n//   #pageSize = 10;\n//   page = 1;\n//   total_pages = 1;\n\n//   getArticles() {\n//     const PARAMS = new URLSearchParams({\n//       key: KEY,\n//       q: this.query,\n//       image_type:  \"photo\",\n//       orientation: \"horizontal\",\n//       safesearch: true,\n//     });\n    \n//     const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n//     console.log(url);\n//     return fetch(url, options).then(res => res.json());\n//   }\n\n//   get pageSize() {\n//     return this.#pageSize;\n//   }\n// }\n\n// let query = 'Elon Musk';\nlet currentPage = 1;\nlet totalPages = 0;\nconst PAGE_SIZE = 15;\n\nexport async function getArticles(query,currentPage) {\n  // const BASE_URL = `${BASE_URL}${END_POINT}?${PARAMS}`;\n  // const END_POINT = '/search';\n  const PARAMS = new URLSearchParams({\n      key: KEY,\n      q: query,\n      image_type:  \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    });\n\n  const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n\n  const options = {\n    params: {\n      q: query,\n      page: currentPage,\n      page_size: PAGE_SIZE,\n      per_page: 15,\n      \n    },\n  };\n    console.log(\"shut down\");\n  const res = await axios.get(url, options);\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { articleTemplate } from '/js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nlet gallery = new SimpleLightbox('.gallery a');\nconst loadElem = document.querySelector('.loader');\nconst BtnLoad = document.querySelector('button[type=button]');\nimport { getArticles } from \"./js/pixabay-api\";\n\n\nhideSpinner();\nhideLoad();\n\nconst refs = {\n  formElem: document.querySelector('.js-search-form'),\n  articleListElem: document.querySelector('.js-article-list'),\n  btnLoadMore: document.querySelector('.js-btn-load'),\n  loadElem: document.querySelector('.js-loader'),\n};\n\nlet query = '';\nlet currentPage = 1;\nlet totalPages = 0;\nconst PAGE_SIZE = 15;\n\n\n\n// ==========================================\nrefs.formElem.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim();\n  // showSpinner();\n  currentPage = 1;\n  refs.articleListElem.innerHTML = '';\n  \n  const ok = query.trim() !== '';\n  if (!ok) {\n        hideSpinner();\n        hideLoad();\n        iziToast.error({\n            message: 'Info Search input must be filled!',\n        });\n\n        return;\n    }\n   try {\n  const data = await getArticles(query,currentPage);\n  hideSpinner();\n      if (data.total == 0) {\n         iziToast.info({\n        title: 'Sorry,',\n        message: \"there are no images matching your search query. Please try again!\",\n      });\n    }\n totalPages = data.total_pages;\n  renderArticles(data.hits);\n  // updateStatusObserver();\n  hideSpinner();\n  showLoad();\n\n   }\n   catch (err) {\n        newsApi.totalResult = 0;\n        iziToast.error({\n          title: 'Error1',\n          message: err.message,\n        });\n      }\n  \n\n    \n  if (currentPage == data.total_pages) { \n    iziToast.info({\n      title: \"info\",\n      message: \"Were sorry, but you've reached the end of search results.\",\n    })\n\n    }\n\n}\n\n\n// async function onFormSubmit(e) {\n\n//   e.preventDefault();\n//   showSpinner();\n\n//   newsApi.query = e.target.elements.query.value.trim();\n//   newsApi.page = 1;\n  \n//   refs.articleListElem.innerHTML = '';\n  \n//   const ok = newsApi.query.trim() !== '';\n//    if (!ok) {\n//         hideSpinner();\n//         iziToast.error({\n//             message: 'Info Search input must be filled!',\n//         });\n//         return;\n//     }\n\n//   try {\n//     const data = await newsApi.getArticles();\n//     hideSpinner();\n//     if (data.total == 0) {\n//        iziToast.info({\n//       title: 'Sorry,',\n//       message: \"there are no images matching your search query. Please try again!\",\n//     });\n\n//     }\n  \n//     newsApi.totalResult = data.totalResults;\n\n//     renderArticles(data.hits);\n//   } catch (err) {\n//     newsApi.totalResult = 0;\n//     iziToast.error({\n//       title: 'Error1',\n//       message: err.message,\n//     });\n//   }\n// \n//   hideSpinner();\n// }\n\nfunction articlesTemplate(articles) {\n  return articles.map(articleTemplate).join('');\n}\n\nfunction renderArticles(articles) {\n  const markup = articlesTemplate(articles);\n  refs.articleListElem.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nfunction showSpinner() {\n  loadElem.classList.remove('visually-hidden');\n}\n\nfunction hideSpinner() {\n  loadElem.classList.add('visually-hidden');\n}\n\nfunction showLoad() {\n  BtnLoad.classList.remove('visually-hidden');\n}\n\nfunction hideLoad() {\n  BtnLoad.classList.add('visually-hidden');\n}\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconsole.log(\"shut down\");\n  \nBtnLoad.addEventListener('click', async () => { \n \n // query = e.target.elements.query.value.trim();\n  showSpinner();\n  currentPage ++;\n  console.log(\"load++++\");\n  const data = await getArticles(query,currentPage);\n  totalPages = data.total_pages;\n  renderArticles(data.hits);\n  // updateStatusObserver();\n  hideSpinner();\n  if (currentPage == data.total_pages) { \n    iziToast.info({\n      title: \"info\",\n      message: \"Were sorry, but you've reached the end of search results.\",\n    })\n    hideLoad();\n    }\n})"],"names":["articleTemplate","article","BASE_URL","END_POINT","KEY","PAGE_SIZE","getArticles","query","currentPage","PARAMS","url","options","axios","gallery","SimpleLightbox","loadElem","BtnLoad","hideSpinner","hideLoad","refs","totalPages","onFormSubmit","iziToast","data","renderArticles","showLoad","err","articlesTemplate","articles","markup","showSpinner"],"mappings":"+vBAAO,SAASA,EAAgBC,EAAS,CAEvC,MAAO;AAAA;AAAA,YAEGA,EAAQ,aAAa,eAAeA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,yCAEjDA,EAAQ,KAAK;AAAA,yCACbA,EAAQ,KAAK;AAAA,4CACVA,EAAQ,QAAQ;AAAA,6CACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,CAI9D,CCTA,MAAMC,EAAW,uBACXC,EAAY,OACZC,EAAM,qCAoCNC,EAAY,GAEX,eAAeC,EAAYC,EAAMC,EAAa,CAGnD,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKL,EACL,EAAGG,EACH,WAAa,QACb,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAChB,CAAK,EAEGE,EAAM,GAAGR,CAAQ,GAAGC,CAAS,IAAIM,CAAM,GAEvCE,EAAU,CACd,OAAQ,CACN,EAAGJ,EACH,KAAMC,EACN,UAAWH,EACX,SAAU,EAEX,CACL,EACI,eAAQ,IAAI,WAAW,GACb,MAAMO,EAAM,IAAIF,EAAKC,CAAO,GAC7B,IACb,CClEA,IAAIE,EAAU,IAAIC,EAAe,YAAY,EAC7C,MAAMC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAU,SAAS,cAAc,qBAAqB,EAI5DC,IACAC,IAEA,MAAMC,EAAO,CACX,SAAU,SAAS,cAAc,iBAAiB,EAClD,gBAAiB,SAAS,cAAc,kBAAkB,EAC1D,YAAa,SAAS,cAAc,cAAc,EAClD,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEA,IAAIZ,EAAQ,GACRC,EAAc,EACdY,EAAa,EAMjBD,EAAK,SAAS,iBAAiB,SAAUE,CAAY,EAErD,eAAeA,EAAa,EAAG,CAQ7B,GAPA,EAAE,eAAc,EAChBd,EAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAEtCC,EAAc,EACdW,EAAK,gBAAgB,UAAY,GAG7B,EADOZ,EAAM,KAAI,IAAO,IACnB,CACHU,IACAC,IACAI,EAAS,MAAM,CACX,QAAS,mCACrB,CAAS,EAED,MACH,CACF,GAAI,CACL,MAAMC,EAAO,MAAMjB,EAAYC,EAAMC,CAAW,EAChDS,IACQM,EAAK,OAAS,GACfD,EAAS,KAAK,CACf,MAAO,SACP,QAAS,mEACjB,CAAO,EAENF,EAAaG,EAAK,YACjBC,EAAeD,EAAK,IAAI,EAExBN,IACAQ,GAEE,OACMC,EAAK,CACP,QAAQ,YAAc,EACtBJ,EAAS,MAAM,CACb,MAAO,SACP,QAASI,EAAI,OACvB,CAAS,CACF,CAIDlB,GAAe,KAAK,aACtBc,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,2DACf,CAAK,CAIL,CA+CA,SAASK,EAAiBC,EAAU,CAClC,OAAOA,EAAS,IAAI5B,CAAe,EAAE,KAAK,EAAE,CAC9C,CAEA,SAASwB,EAAeI,EAAU,CAChC,MAAMC,EAASF,EAAiBC,CAAQ,EACxCT,EAAK,gBAAgB,mBAAmB,YAAaU,CAAM,EAC3DhB,EAAQ,QAAO,CACjB,CAEA,SAASiB,GAAc,CACrBf,EAAS,UAAU,OAAO,iBAAiB,CAC7C,CAEA,SAASE,GAAc,CACrBF,EAAS,UAAU,IAAI,iBAAiB,CAC1C,CAEA,SAASU,GAAW,CAClBT,EAAQ,UAAU,OAAO,iBAAiB,CAC5C,CAEA,SAASE,GAAW,CAClBF,EAAQ,UAAU,IAAI,iBAAiB,CACzC,CAGiB,IAAIF,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAED,QAAQ,IAAI,WAAW,EAEvBE,EAAQ,iBAAiB,QAAS,SAAY,CAG5Cc,IACAtB,IACA,QAAQ,IAAI,UAAU,EACtB,MAAMe,EAAO,MAAMjB,EAAYC,EAAMC,CAAW,EAChDY,EAAaG,EAAK,YAClBC,EAAeD,EAAK,IAAI,EAExBN,IACIT,GAAee,EAAK,cACtBD,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,2DACf,CAAK,EACDJ,IAEJ,CAAC"}